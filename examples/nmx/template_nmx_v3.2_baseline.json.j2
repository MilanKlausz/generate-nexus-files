{
  "children": [
    {
      "attributes": [
        {
          "dtype": "string",
          "name": "NX_class",
          "values": "NXentry"
        }
      ],
      "children": [
        {
          "config": {
            "name": "title",
            "type": "string",
            "values": "$TITLE$"
          },
          "module": "dataset"
        },
        {
          "config": {
            "name": "experiment_identifier",
            "type": "string",
            "values": "$EXP_ID$"
          },
          "module": "dataset"
        },
        {
          "config": {
            "name": "entry_identifier",
            "type": "string",
            "values": "$ENTRY_ID$"
          },
          "module": "dataset"
        },
        {
          "config": {
            "name": "entry_identifier_uuid",
            "type": "string",
            "values": "$JOB_ID$"
          },
          "module": "dataset"
        },
        {
          "attributes": [
            {
              "dtype": "string",
              "name": "NX_class",
              "values": "NXcite"
            }
          ],
          "children": [
            {
              "config": {
                "name": "description",
                "type": "string",
                "values": "Neutron events were stored in NeXus files via the ESS DAQ (European Spallation Source Data AcQuisition) system"
              },
              "module": "dataset"
            },
            {
              "config": {
                "name": "doi",
                "type": "string",
                "values": "https://doi.org/10.1088/1748-0221/13/11/T11002"
              },
              "module": "dataset"
            },
            {
              "config": {
                "name": "bibtex",
                "type": "string",
                "values": "@article{Mukai_2018,\r\ndoi = {10.1088/1748-0221/13/10/T10001},\r\nurl = {https://dx.doi.org/10.1088/1748-0221/13/10/T10001},\r\nyear = {2018},\r\nmonth = {oct},\r\npublisher = {},\r\nvolume = {13},\r\nnumber = {10},\r\npages = {T10001},\r\nauthor = {A.H.C. Mukai and M.J. Clarke and M.J. Christensen and J.M.C. Nilsson and M.G. Shetty and M. Brambilla and D. Werder and M. K\u00f6nnecke and J. Harper and M.D. Jones and F.A. Akeroyd and C. Reis and G. Kourousias and T.S. Richter},\r\ntitle = {Architecture of the data aggregation and streaming system for the European Spallation Source neutron instrument suite},\r\njournal = {Journal of Instrumentation},\r\nabstract = {The European Spallation Source (ESS) will provide long   neutron pulses for experiments on a suite of different   instruments. Most of these will perform neutron data acquisition in   event mode, i.e. each detected neutron will be characterised by one   absolute timestamp and pixel identifier pair. Slow controls metadata   from EPICS, such as sample environment measurements and motor   positions, will also be timestamped at their source, so that all   data and metadata are streamed as a list of events instead of   histograms. A flexible data aggregation and streaming system is   being developed combining both open source third-party software and   in-house development. This is to be used at ESS and other neutron   scattering facilities like ISIS and SINQ, replacing legacy solutions   by a shared software collection maintained by a cross-facility   effort. The architecture of the Apache Kafka-based system, its   metadata forwarding and NeXus file writing components are presented,   along with test results demonstrating their integration and the   scalability in terms of performance.}\r\n}\r\n"
              },
              "module": "dataset"
            },
            {
              "config": {
                "name": "endnote",
                "type": "string",
                "values": "%0 Journal Article\n%T Architecture of the data aggregation and streaming system for the European Spallation Source neutron instrument suite\n%A Mukai, A. H. C.\n%A Clarke, M. J.\n%A Christensen, M. J.\n%A Nilsson, J. M. C.\n%A Shetty, M. G.\n%A Brambilla, M.\n%A Werder, D.\n%A K\u00f6nnecke, M.\n%A Harper, J.\n%A Jones, M. D.\n%A Akeroyd, F. A.\n%A Reis, C.\n%A Kourousias, G.\n%A Richter, T. S.\n%J Journal of Instrumentation\n%D 2018\n%8 oct\n%V 13\n%N 10\n%F Mukai_2018\n%X The European Spallation Source (ESS) will provide long neutron pulses for experiments on a suite of different instruments. Most of these will perform neutron data acquisition in event mode, i.e. each detected neutron will be characterised by one absolute timestamp and pixel identifier pair. Slow controls metadata from EPICS, such as sample environment measurements and motor positions, will also be timestamped at their source, so that all data and metadata are streamed as a list of events instead of histograms. A flexible data aggregation and streaming system is being developed combining both open source third-party software and in-house development. This is to be used at ESS and other neutron scattering facilities like ISIS and SINQ, replacing legacy solutions by a shared software collection maintained by a cross-facility effort. The architecture of the Apache Kafka-based system, its metadata forwarding and NeXus file writing components are presented, along with test results demonstrating their integration and the scalability in terms of performance.\n%U https://dx.doi.org/10.1088/1748-0221/13/10/T10001\n%U http://dx.doi.org/10.1088/1748-0221/13/10/T10001\n%P 10001"
              },
              "module": "dataset"
            }
          ],
          "name": "daq_publication",
          "type": "group"
        },
        {
          "attributes": [
            {
              "dtype": "string",
              "name": "NX_class",
              "values": "NXinstrument"
            }
          ],
          "children": [
            {
              "config": {
                "name": "name",
                "type": "string",
                "values": "NMX"
              },
              "module": "dataset"
            },
            {
              "name": "nmx_publication",
              "type": "group",
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXcite"
                }
              ],
              "children": [
                {
                  "config": {
                    "name": "description",
                    "type": "string",
                    "values": "This experiment took place on this instrument at the ESS (European Spallation Source)"
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "doi",
                    "type": "string",
                    "values": "https://doi.org/10.1016/j.nima.2020.163402"
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "bibtex",
                    "type": "string",
                    "values": "@article{ANDERSEN2020163402,\ntitle = {The instrument suite of the European Spallation Source},\njournal = {Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment},\nvolume = {957},\npages = {163402},\nyear = {2020},\nissn = {0168-9002},\ndoi = {https://doi.org/10.1016/j.nima.2020.163402},\nurl = {https://www.sciencedirect.com/science/article/pii/S0168900220300097},\nauthor = {K.H. Andersen and D.N Argyriou and A.J. Jackson and J. Houston and P.F. Henry and P.P. Deen and R. Toft-Petersen and P. Beran and M. Strobl and T. Arnold and H. Wacklin-Knecht and N. Tsapatsaris and E. Oksanen and R. Woracek and W. Schweika and D. Mannix and A. Hiess and S. Kennedy and O. Kirstein and S. {Petersson \u00c5rsk\u00f6ld} and J. Taylor and M.E. Hagen and G. Laszlo and K. Kanaki and F. Piscitelli and A. Khaplanov and I. Stefanescu and Th. Kittelmann and D. Pfeiffer and R. Hall-Wilton and C.I. Lopez and G. Aprigliano and L. Whitelegg and F.Y. Moreira and M. Olsson and H.N. Bordallo and D. Mart\u00edn-Rodr\u00edguez and H. Schneider and M. Sharp and M. Hartl and G. Nagy and S. Ansell and S. Pullen and A. Vickery and A. Fedrigo and F. Mezei and M. Arai and R.K. Heenan and W. Halcrow and D. Turner and D. Raspino and A. Orszulik and J. Cooper and N. Webb and P. Galsworthy and J. Nightingale and S. Langridge and J. Elmer and H. Frielinghaus and R. Hanslik and A. Gussen and S. Jaksch and R. Engels and T. Kozielewski and S. Butterweck and M. Feygenson and P. Harbott and A. Poqu\u00e9 and A. Schwaab and K. Lieutenant and N. Violini and J. Voigt and T. Br\u00fcckel and M. Koenen and H. K\u00e4mmerling and E. Babcock and Z. Salhi and A. Wischnewski and A. Heynen and S. D\u00e9sert and J. Jestin and F. Porcher and X. Fabr\u00e8ges and G. Fabr\u00e8ges and B. Annigh\u00f6fer and S. Klimko and Th. Dupont and Th. Robillard and A. Goukassov and S. Longeville and Ch. Alba-Simionesco and Ph. Bourges and J. {Guyon Le Bouffy} and P. Lavie and S. Rodrigues and E. Calzada and M. Lerche and B. Schillinger and Ph. Schmakat and M. Schulz and M. Seifert and W. Lohstroh and W. Petry and J. Neuhaus and L. Loaiza and A. Tartaglione and A. Glavic and S. Sch\u00fctz and J. Stahn and E. Lehmann and M. Morgano and J. Schefer and U. Filges and Ch. Klauser and Ch. Niedermayer and J. Fenske and G. Nowak and M. Rouijaa and D.J. Siemers and R. Kiehn and M. M\u00fcller and H. Carlsen and L. Udby and K. Lefmann and J.O. Birk and S. Holm-Dahlin and M. Bertelsen and U. Bengaard Hansen and M.A. Olsen and M. Christensen and K. Iversen and N.B. Christensen and H.M. R\u00f8nnow and P.G. Freeman and B.C. Hauback and R. Kolevatov and I. Llamas-Jansa and A. Orecchini and F. Sacchetti and C. Petrillo and A. Paciaroni and P. Tozzi and M. Zanatta and P. Luna and I. Herranz and O.G. {del Moral} and M. Huerta and M. Mag\u00e1n and M. Mosconi and E. Abad and J. Aguilar and S. Stepanyan and G. Bakedano and R. Vivanco and I. Bustinduy and F. Sordo and J.L. Mart\u00ednez and R.E. Lechner and F.J. Villacorta and J. \u0160aroun and P. Luk\u00e1\u0161 and M. Mark\u00f3 and M. Zanetti and S. Bellissima and L. {del Rosso} and F. Masi and C. Bovo and M. Chowdhury and A. {De Bonis} and L. {Di Fresco} and C. Scatigno and S.F. Parker and F. Fernandez-Alonso and D. Colognesi and R. Senesi and C. Andreani and G. Gorini and G. Scionti and A. Schreyer},\nkeywords = {Slow neutron scattering, Pulsed neutron instrumentation, Accelerator-based neutron facilities, ESS instrument suite},\nabstract = {An overview is provided of the 15 neutron beam instruments making up the initial instrument suite of the European Spallation Source (ESS), and being made available to the neutron user community. The ESS neutron source consists of a high-power accelerator and target station, providing a unique long-pulse time structure of slow neutrons. The design considerations behind the time structure, moderator geometry and instrument layout are presented. The 15-instrument suite consists of two small-angle instruments, two reflectometers, an imaging beamline, two single-crystal diffractometers; one for macromolecular crystallography and one for magnetism, two powder diffractometers, and an engineering diffractometer, as well as an array of five inelastic instruments comprising two chopper spectrometers, an inverse-geometry single-crystal excitations spectrometer, an instrument for vibrational spectroscopy and a high-resolution backscattering spectrometer. The conceptual design, performance and scientific drivers of each of these instruments are described. All of the instruments are designed to provide breakthrough new scientific capability, not currently available at existing facilities, building on the inherent strengths of the ESS long-pulse neutron source of high flux, flexible resolution and large bandwidth. Each of them is predicted to provide world-leading performance at an accelerator power of 2 MW. This technical capability translates into a very broad range of scientific capabilities. The composition of the instrument suite has been chosen to maximise the breadth and depth of the scientific impact of the early years of the ESS, and provide a solid base for completion and further expansion of the facility.}\n}"
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "endnote",
                    "type": "string",
                    "values": "%0 Journal Article\n%T The instrument suite of the European Spallation Source\n%A Andersen, K. H.\n%A Argyriou, D. N.\n%A Jackson, A. J.\n%A Houston, J.\n%A Henry, P. F.\n%A Deen, P. P.\n%A Toft-Petersen, R.\n%A Beran, P.\n%A Strobl, M.\n%A Arnold, T.\n%A Wacklin-Knecht, H.\n%A Tsapatsaris, N.\n%A Oksanen, E.\n%A Woracek, R.\n%A Schweika, W.\n%A Mannix, D.\n%A Hiess, A.\n%A Kennedy, S.\n%A Kirstein, O.\n%A \u221a\u00d6rsk\u221a\u2202ld, S. Petersson\n%A Taylor, J.\n%A Hagen, M. E.\n%A Laszlo, G.\n%A Kanaki, K.\n%A Piscitelli, F.\n%A Khaplanov, A.\n%A Stefanescu, I.\n%A Kittelmann, Th\n%A Pfeiffer, D.\n%A Hall-Wilton, R.\n%A Lopez, C. I.\n%A Aprigliano, G.\n%A Whitelegg, L.\n%A Moreira, F. Y.\n%A Olsson, M.\n%A Bordallo, H. N.\n%A Mart\u221a\u2260n-Rodr\u221a\u2260guez, D.\n%A Schneider, H.\n%A Sharp, M.\n%A Hartl, M.\n%A Nagy, G.\n%A Ansell, S.\n%A Pullen, S.\n%A Vickery, A.\n%A Fedrigo, A.\n%A Mezei, F.\n%A Arai, M.\n%A Heenan, R. K.\n%A Halcrow, W.\n%A Turner, D.\n%A Raspino, D.\n%A Orszulik, A.\n%A Cooper, J.\n%A Webb, N.\n%A Galsworthy, P.\n%A Nightingale, J.\n%A Langridge, S.\n%A Elmer, J.\n%A Frielinghaus, H.\n%A Hanslik, R.\n%A Gussen, A.\n%A Jaksch, S.\n%A Engels, R.\n%A Kozielewski, T.\n%A Butterweck, S.\n%A Feygenson, M.\n%A Harbott, P.\n%A Poqu\u221a\u00a9, A.\n%A Schwaab, A.\n%A Lieutenant, K.\n%A Violini, N.\n%A Voigt, J.\n%A Br\u221a?ckel, T.\n%A Koenen, M.\n%A K\u221a?mmerling, H.\n%A Babcock, E.\n%A Salhi, Z.\n%A Wischnewski, A.\n%A Heynen, A.\n%A D\u221a\u00a9sert, S.\n%A Jestin, J.\n%A Porcher, F.\n%A Fabr\u221a?ges, X.\n%A Fabr\u221a?ges, G.\n%A Annigh\u221a\u2202fer, B.\n%A Klimko, S.\n%A Dupont, Th\n%A Robillard, Th\n%A Goukassov, A.\n%A Longeville, S.\n%A Alba-Simionesco, Ch\n%A Bourges, Ph\n%A Bouffy, J. Guyon Le\n%A Lavie, P.\n%A Rodrigues, S.\n%A Calzada, E.\n%A Lerche, M.\n%A Schillinger, B.\n%A Schmakat, Ph\n%A Schulz, M.\n%A Seifert, M.\n%A Lohstroh, W.\n%A Petry, W.\n%A Neuhaus, J.\n%A Loaiza, L.\n%A Tartaglione, A.\n%A Glavic, A.\n%A Sch\u221a?tz, S.\n%A Stahn, J.\n%A Lehmann, E.\n%A Morgano, M.\n%A Schefer, J.\n%A Filges, U.\n%A Klauser, Ch\n%A Niedermayer, Ch\n%A Fenske, J.\n%A Nowak, G.\n%A Rouijaa, M.\n%A Siemers, D. J.\n%A Kiehn, R.\n%A M\u221a?ller, M.\n%A Carlsen, H.\n%A Udby, L.\n%A Lefmann, K.\n%A Birk, J. O.\n%A Holm-Dahlin, S.\n%A Bertelsen, M.\n%A Hansen, U. Bengaard\n%A Olsen, M. A.\n%A Christensen, M.\n%A Iversen, K.\n%A Christensen, N. B.\n%A R\u221a?nnow, H. M.\n%A Freeman, P. G.\n%A Hauback, B. C.\n%A Kolevatov, R.\n%A Llamas-Jansa, I.\n%A Orecchini, A.\n%A Sacchetti, F.\n%A Petrillo, C.\n%A Paciaroni, A.\n%A Tozzi, P.\n%A Zanatta, M.\n%A Luna, P.\n%A Herranz, I.\n%A Moral, O. G. del\n%A Huerta, M.\n%A Mag\u221a\u00b0n, M.\n%A Mosconi, M.\n%A Abad, E.\n%A Aguilar, J.\n%A Stepanyan, S.\n%A Bakedano, G.\n%A Vivanco, R.\n%A Bustinduy, I.\n%A Sordo, F.\n%A Mart\u221a\u2260nez, J. L.\n%A Lechner, R. E.\n%A Villacorta, F. J.\n%A \u2248\u2020aroun, J.\n%A Luk\u221a\u00b0\u2248\u00b0, P.\n%A Mark\u221a\u2265, M.\n%A Zanetti, M.\n%A Bellissima, S.\n%A Rosso, L. del\n%A Masi, F.\n%A Bovo, C.\n%A Chowdhury, M.\n%A Bonis, A. De\n%A Fresco, L. Di\n%A Scatigno, C.\n%A Parker, S. F.\n%A Fernandez-Alonso, F.\n%A Colognesi, D.\n%A Senesi, R.\n%A Andreani, C.\n%A Gorini, G.\n%A Scionti, G.\n%A Schreyer, A.\n%J Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment\n%D 2020\n%V 957\n%@ 0168-9002\n%F ANDERSEN2020163402\n%X An overview is provided of the 15 neutron beam instruments making up the initial instrument suite of the European Spallation Source (ESS), and being made available to the neutron user community. The ESS neutron source consists of a high-power accelerator and target station, providing a unique long-pulse time structure of slow neutrons. The design considerations behind the time structure, moderator geometry and instrument layout are presented. The 15-instrument suite consists of two small-angle instruments, two reflectometers, an imaging beamline, two single-crystal diffractometers; one for macromolecular crystallography and one for magnetism, two powder diffractometers, and an engineering diffractometer, as well as an array of five inelastic instruments comprising two chopper spectrometers, an inverse-geometry single-crystal excitations spectrometer, an instrument for vibrational spectroscopy and a high-resolution backscattering spectrometer. The conceptual design, performance and scientific drivers of each of these instruments are described. All of the instruments are designed to provide breakthrough new scientific capability, not currently available at existing facilities, building on the inherent strengths of the ESS long-pulse neutron source of high flux, flexible resolution and large bandwidth. Each of them is predicted to provide world-leading performance at an accelerator power of 2 MW. This technical capability translates into a very broad range of scientific capabilities. The composition of the instrument suite has been chosen to maximise the breadth and depth of the scientific impact of the early years of the ESS, and provide a solid base for completion and further expansion of the facility.\n%K Slow neutron scattering, Pulsed neutron instrumentation, Accelerator-based neutron facilities, ESS instrument suite\n%U https://www.sciencedirect.com/science/article/pii/S0168900220300097\n%U http://dx.doi.org/https://doi.org/10.1016/j.nima.2020.163402\n%P 163402"
                  },
                  "module": "dataset"
                }
              ]
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXsource"
                }
              ],
              "children": [
                {
                  "config": {
                    "name": "type",
                    "type": "string",
                    "values": "Spallation Neutron Source"
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/source/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            1.0,
                            0.0,
                            0.0
                          ]
                        }
                      ],
                      "config": {
                        "name": "translation_x",
                        "type": "double",
                        "values": -0.53123
                      },
                      "module": "dataset"
                    },
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        },
                        {
                          "dtype": "string",
                          "name": "depends_on",
                          "values": "/entry/instrument/source/transformations/translation_x"
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": -157.405
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "source",
              "type": "group"
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXdisk_chopper"
                }
              ],
              "children": [
                {
                  "config": {
                    "name": "slits",
                    "type": "int64",
                    "values": 1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "deg"
                    }
                  ],
                  "config": {
                    "name": "slit_edges",
                    "type": "double",
                    "values": [
                      0.0,
                      86.0
                    ]
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "slit_height",
                    "type": "double",
                    "values": 0.1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "radius",
                    "type": "double",
                    "values": 0.35
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "config": {
                        "source": "NMX-ChpWLS1:YYY:tdct",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "tdct"
                    }
                  ],
                  "name": "top_dead_center",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "ns"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS1:YYY:Delay",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "delay",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "Hz"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS1:YYY:Spd_R",
                        "topic": "nmx_choppers",
                        "value_units": "Hz"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "rotation_speed",
                  "type": "group"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/WLS-1_chopper/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        },
                        {
                          "dtype": "string",
                          "name": "depends_on",
                          "values": "/entry/instrument/source/transformations/translation"
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": 28.67
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "WLS-1_chopper",
              "type": "group"
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXdisk_chopper"
                }
              ],
              "children": [
                {
                  "config": {
                    "name": "slits",
                    "type": "int64",
                    "values": 1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "deg"
                    }
                  ],
                  "config": {
                    "name": "slit_edges",
                    "type": "double",
                    "values": [
                      0.0,
                      170.0
                    ]
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "slit_height",
                    "type": "double",
                    "values": 0.1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "radius",
                    "type": "double",
                    "values": 0.35
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "Hz"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS2A:YYY:wls-2a-rotationspeed",
                        "topic": "nmx_choppers",
                        "value_units": "Hz"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "rotation_speed",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "config": {
                        "source": "NMX-ChpWLS2B:YYY:tdct",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "tdct"
                    }
                  ],
                  "name": "top_dead_center",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "ns"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS2A:YYY:Delay",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "delay",
                  "type": "group"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/WLS-2A_chopper/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        },
                        {
                          "dtype": "string",
                          "name": "depends_on",
                          "values": "/entry/instrument/source/transformations/translation"
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": 50.95
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "WLS-2A_chopper",
              "type": "group"
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXdisk_chopper"
                }
              ],
              "children": [
                {
                  "config": {
                    "name": "slits",
                    "type": "int64",
                    "values": 1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "deg"
                    }
                  ],
                  "config": {
                    "name": "slit_edges",
                    "type": "double",
                    "values": [
                      0.0,
                      170.0
                    ]
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "slit_height",
                    "type": "double",
                    "values": 0.1
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "m"
                    }
                  ],
                  "config": {
                    "name": "radius",
                    "type": "double",
                    "values": 0.35
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "Hz"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS2B:YYY:wls-2b-rotationspeed",
                        "topic": "nmx_choppers",
                        "value_units": "Hz"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "rotation_speed",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "ns"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS2B:YYY:tdct",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "top_dead_center",
                  "type": "group"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "NX_class",
                      "values": "NXlog"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "ns"
                        }
                      ],
                      "config": {
                        "dtype": "double",
                        "source": "NMX-ChpWLS2B:YYY:Delay",
                        "topic": "nmx_choppers",
                        "value_units": "ns"
                      },
                      "module": "f144"
                    }
                  ],
                  "name": "delay",
                  "type": "group"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/WLS-2B_chopper/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        },
                        {
                          "dtype": "string",
                          "name": "depends_on",
                          "values": "/entry/instrument/WLS-2A_chopper/transformations/translation"
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": 0.1
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "WLS-2B_chopper",
              "type": "group"
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXslit"
                }
              ],
              "children": [
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "mm"
                    }
                  ],
                  "config": {
                    "name": "x_gap",
                    "type": "double",
                    "values": 30.0
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "mm"
                    }
                  ],
                  "config": {
                    "name": "y_gap",
                    "type": "double",
                    "values": 30.0
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/slit_1/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        },
                        {
                          "dtype": "float",
                          "name": "offset",
                          "values": [0, 0, 0]
                        },
                        {
                          "dtype": "string",
                          "name": "offset_units",
                          "values": "m"
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": -2.0
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "slit_1",
              "type": "group"
            },
            {
              "attributes": [
                {
                  "dtype": "string",
                  "name": "NX_class",
                  "values": "NXslit"
                }
              ],
              "children": [
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "mm"
                    }
                  ],
                  "config": {
                    "name": "x_gap",
                    "type": "double",
                    "values": 30.0
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "dtype": "string",
                      "name": "units",
                      "values": "mm"
                    }
                  ],
                  "config": {
                    "name": "y_gap",
                    "type": "double",
                    "values": 30.0
                  },
                  "module": "dataset"
                },
                {
                  "config": {
                    "name": "depends_on",
                    "values": "/entry/instrument/slit_2/transformations/translation"
                  },
                  "module": "dataset"
                },
                {
                  "attributes": [
                    {
                      "name": "NX_class",
                      "values": "NXtransformations"
                    }
                  ],
                  "children": [
                    {
                      "attributes": [
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "string",
                          "name": "transformation_type",
                          "values": "translation"
                        },
                        {
                          "dtype": "string",
                          "name": "units",
                          "values": "m"
                        },
                        {
                          "dtype": "float",
                          "name": "vector",
                          "values": [
                            0.0,
                            0.0,
                            1.0
                          ]
                        }
                      ],
                      "config": {
                        "name": "translation",
                        "type": "double",
                        "values": -1
                      },
                      "module": "dataset"
                    }
                  ],
                  "name": "transformations",
                  "type": "group"
                }
              ],
              "name": "slit_2",
              "type": "group"
            }
            {% if j2_instrument_detector_panel_0 %}
            ,
            {{ j2_instrument_detector_panel_0 }}
            {% endif %}
            {% if j2_instrument_detector_panel_1 %}
            ,
            {{ j2_instrument_detector_panel_1 }}
            {% endif %}
            {% if j2_instrument_detector_panel_2 %}
            ,
            {{ j2_instrument_detector_panel_2 }}
            {% endif %}

          ],
          "name": "instrument",
          "type": "group"
        }
        {%- if j2_nxsample %},
{{ j2_nxsample }}
        {%- endif %}
      ],
      "name": "entry",
      "type": "group"
    }
  ]
}